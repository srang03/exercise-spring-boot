# ğŸ“˜ Mockito í–‰ìœ„ ê¸°ë°˜ í…ŒìŠ¤íŠ¸ (Behavior Verification) ì •ë¦¬

---

## âœ… verify(...) í•µì‹¬ ê°œë…

- `verify(...)`ëŠ” í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ê°ì²´ê°€ **ì–´ë–¤ ì™¸ë¶€ ì˜ì¡´ ê°ì²´ì˜ ë©”ì„œë“œë¥¼ ì‹¤ì œë¡œ í˜¸ì¶œí–ˆëŠ”ì§€ í™•ì¸**í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” Mockitoì˜ í•µì‹¬ ë©”ì„œë“œì…ë‹ˆë‹¤.
- í–‰ìœ„ ê¸°ë°˜ í…ŒìŠ¤íŠ¸(Behavior-Driven Test)ì˜ í•µì‹¬ì€ **ë™ì‘ ìì²´ê°€ ë°œìƒí–ˆëŠ”ì§€ ì—¬ë¶€**ë¥¼ ê²€ì¦í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

```java
verify(mockObject).someMethod(args);
```

---

## âœ… verify(...) ì£¼ìš” ì‚¬ìš©ë²•

| ë©”ì„œë“œ | ì„¤ëª… |
|--------|------|
| `verify(mock).method(...)` | ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸ |
| `verify(mock, times(n)).method(...)` | në²ˆ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸ |
| `verify(mock, never()).method(...)` | í•œ ë²ˆë„ í˜¸ì¶œë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸ |
| `verifyNoInteractions(mock)` | mock ê°ì²´ì™€ ì–´ë–¤ ìƒí˜¸ì‘ìš©ë„ ì—†ì—ˆëŠ”ì§€ í™•ì¸ |
| `doNothing().when(mock).method(...)` | void ë©”ì„œë“œë¥¼ Stubbing (ì˜ˆì™¸ ì—†ì´ ë™ì‘) |

---

## âœ… ì˜ˆì œ ì½”ë“œ ëª¨ìŒ

### âœ… 1. í˜¸ì¶œ ì—¬ë¶€ ê²€ì¦

```java
verify(emailService).sendEmail(anyString());
```

â†’ `sendEmail()` ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸

---

### âœ… 2. í˜¸ì¶œ íšŸìˆ˜ ê²€ì¦

```java
verify(emailService, times(1)).sendEmail("hello@test.com");
```

â†’ ì •í™•íˆ 1ë²ˆ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸

---

### âœ… 3. í˜¸ì¶œë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸

```java
verify(notificationService, never()).notify(anyString());
```

â†’ í•œ ë²ˆë„ í˜¸ì¶œë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸

---

### âœ… 4. void ë©”ì„œë“œ í…ŒìŠ¤íŠ¸ (Stubbing)

```java
doNothing().when(emailService).sendEmail(anyString());

emailService.sendEmail("test@test.com");
```

â†’ ì‹¤ì œë¡œëŠ” ì•„ë¬´ ì¼ë„ ë°œìƒí•˜ì§€ ì•ŠìŒ (ì˜ˆì™¸ë„ ì—†ìŒ)

---

### âœ… 5. ì¸ì í™•ì¸

```java
verify(notificationPort).notify(contains("admin"));
verify(notificationPort).notify(eq("admin@urock.kr"));
verify(notificationPort).notify(anyString());
```

â†’ í˜¸ì¶œ ì¸ì ê°’ë„ ê²€ì¦ ê°€ëŠ¥

---

## âœ… ì‹¤ì „ êµ¬ì„± íŒ¨í„´: given â†’ when â†’ then

```java
// given
when(userRepository.existsById("abc")).thenReturn(true);

// when
userService.register("abc");

// then
verify(notificationService).notify("abc ê°€ì… ì™„ë£Œ");
```

---

## âœ… ì‹¤ë¬´ íŒ

| ìƒí™© | ì¶”ì²œ ì‚¬ìš© ì˜ˆ |
|------|---------------|
| ì™¸ë¶€ ì‹œìŠ¤í…œ í˜¸ì¶œ ê²€ì¦ | `verify(...)` |
| ì´ë²¤íŠ¸ ë°œí–‰ ê²€ì¦ | `verify(publisher).publish(...)` |
| void ë©”ì„œë“œ í…ŒìŠ¤íŠ¸ | `doNothing().when(...)` |
| í…ŒìŠ¤íŠ¸ ëŒ€ìƒì˜ ë¶€ì‘ìš© í™•ì¸ | `verify(mock, never())` |

---

## âœ… ìš”ì•½

- `verify(...)`ëŠ” ì™¸ë¶€ ì˜ì¡´ì„±ê³¼ì˜ **ìƒí˜¸ì‘ìš©ì´ ì˜ˆìƒëŒ€ë¡œ ìˆ˜í–‰ë˜ì—ˆëŠ”ì§€** ê²€ì¦í•˜ëŠ” ë„êµ¬
- ë©”ì„œë“œ í˜¸ì¶œ ì—¬ë¶€, íšŸìˆ˜, ì¸ì ê°’ ë“± ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ê²€ì¦ ê°€ëŠ¥
- í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì–´ë–¤ ì™¸ë¶€ íš¨ê³¼ë¥¼ ì¼ìœ¼í‚¤ëŠ”ì§€ í™•ì¸**í•  ìˆ˜ ìˆìŒ