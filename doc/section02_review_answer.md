# âœ… AOP ì£¼ì œ ì´í•´ë„ í™•ì¸ - ë¬¸ì œ ë° ì •ë‹µ ì •ë¦¬

# ðŸŽ¯ ì´í•´ë„ í™•ì¸ ë¬¸ì œ (ì´ 6ë¬¸í•­)

### Q1. ìƒì„±ìž ì£¼ìž…ì´ ê¶Œìž¥ë˜ëŠ” ì´ìœ ë¥¼ ì•„ëž˜ ë³´ê¸° ì¤‘ ê³ ë¥´ì„¸ìš”. (1ì )

A. ìˆœí™˜ ì°¸ì¡°ë¥¼ ë§‰ê¸° ìœ„í•´
B. setterê°€ ì—†ìœ¼ë©´ ë¶ˆë³€ ê°ì²´ê°€ ë˜ë¯€ë¡œ
C. í•œ ë²ˆë§Œ ì£¼ìž…ë˜ê³ , ì™¸ë¶€ì—ì„œ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•´ ì•ˆì •ì ì´ê¸° ë•Œë¬¸
D. í•„ë“œê°€ privateì´ë©´ ì ‘ê·¼í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸

---

### Q2. ë‹¤ìŒ ì¤‘ `@Around` ì–´ë…¸í…Œì´ì…˜ì˜ ì„¤ëª…ìœ¼ë¡œ ì˜¬ë°”ë¥¸ ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”? (1ì )

A. ë©”ì„œë“œ ì‹¤í–‰ ì „ ë¡œì§ë§Œ ì‹¤í–‰ëœë‹¤\
B. ë©”ì„œë“œ ì‹¤í–‰ í›„ ë¡œì§ë§Œ ì‹¤í–‰ëœë‹¤\
C. ë©”ì„œë“œ ì‹¤í–‰ ì „, í›„, ì˜ˆì™¸, ê²°ê³¼ ëª¨ë‘ ì œì–´í•  ìˆ˜ ìžˆë‹¤\
D. JoinPointë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤

---

### Q3. AOP ì ìš© ì‹œ, ë™ì¼í•œ íƒ€ìž…ì˜ Beanì´ 2ê°œ ì´ìƒì¼ ê²½ìš° í•´ê²° ë°©ë²•ì´ ì•„ë‹Œ ê²ƒì€? (1ì )

A. `@Qualifier`ë¥¼ ì‚¬ìš©í•˜ì—¬ Beanì„ ëª…ì‹œì ìœ¼ë¡œ ì£¼ìž…í•œë‹¤\
B. `@Primary`ë¡œ ê¸°ë³¸ Beanì„ ì§€ì •í•œë‹¤\
C. `@Autowired(required = false)`ë¡œ ê°•ì œí•˜ì§€ ì•ŠëŠ”ë‹¤\
D. `ApplicationContext.getBean(beanName)`ìœ¼ë¡œ ìˆ˜ë™ ì¡°íšŒí•œë‹¤

---

### Q4. Spring Security ì—†ì´ ì§ì ‘ AOPë¡œ ì¸ê°€ ì²˜ë¦¬ë¥¼ êµ¬í˜„í•˜ë ¤ë©´ í•„ìš”í•œ êµ¬ì„±ìš”ì†ŒëŠ”? (2ì )

1. ì‚¬ìš©ìž ì—­í• ì„ ë³´ê´€í•˜ëŠ” \_\_\_\_\_\_\_\_
2. ë©”ì„œë“œ ì§„ìž… ì‹œ ì—­í• ì„ í™•ì¸í•˜ëŠ” \_\_\_\_\_\_\_\_
3. ì—­í•  ìš”êµ¬ì‚¬í•­ì„ ì •ì˜í•˜ëŠ” \_\_\_\_\_\_\_\_ ì–´ë…¸í…Œì´ì…˜

---

### Q5. ThreadLocalì´ staticìœ¼ë¡œ ì„ ì–¸ë˜ì—ˆëŠ”ë°ë„ ì‚¬ìš©ìžë³„ë¡œ ì •ë³´ê°€ ë¶„ë¦¬ë˜ëŠ” ì´ìœ ëŠ”? (1ì )

---

### Q6. ì•„ëž˜ ì½”ë“œì˜ ì‹¤í–‰ ê²°ê³¼ë¡œ ì•Œë§žì€ ê²ƒì€? (1ì )

```java
@RestController
public class UserController {
    @GetMapping("/me")
    public UserInfo getUserInfo() {
        return new UserInfo("í™ê¸¸ë™", "010-1234-5678", "gildong@example.com");
    }
}
```

**ì¡°ê±´**: UserContextì˜ Roleì´ USERì¼ ë•Œ, `phone`, `email` í•„ë“œëŠ” @MaskField ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì–´ ìžˆìŒ

ì¶œë ¥ ê²°ê³¼:
A. ì „í™”ë²ˆí˜¸ì™€ ì´ë©”ì¼ ëª¨ë‘ ê·¸ëŒ€ë¡œ ë…¸ì¶œë¨\
B. ì „í™”ë²ˆí˜¸ë§Œ ë§ˆìŠ¤í‚¹ë¨\
C. ì´ë©”ì¼ë§Œ ë§ˆìŠ¤í‚¹ë¨\
D. ì „í™”ë²ˆí˜¸ì™€ ì´ë©”ì¼ ëª¨ë‘ ë§ˆìŠ¤í‚¹ë¨

---


## ðŸ§¾ ì œì¶œí•œ ì •ë‹µ

| ë²ˆí˜¸ | ë¬¸ì œ ìš”ì•½ | ì œì¶œí•œ ë‹µ | ì •ë‹µ ì—¬ë¶€ |
|------|------------|------------|------------|
| 1 | ìƒì„±ìž ì£¼ìž… ì´ìœ  | C | âœ… ì •ë‹µ |
| 2 | @Around ì„¤ëª… | C | âœ… ì •ë‹µ |
| 3 | ë™ì¼ íƒ€ìž… Beanì´ 2ê°œ ì´ìƒì¼ ë•Œ í•´ê²°ì±…ì´ ì•„ë‹Œ ê²ƒ | C | âŒ ì˜¤ë‹µ |
| 4-1 | ì‚¬ìš©ìž ì—­í•  ì €ìž¥ì†Œ | ThreadLocal | âœ… ì •ë‹µ |
| 4-2 | ì§„ìž… ì‹œ ì—­í•  í™•ì¸ ë°©ì‹ | AOP | âœ… ì •ë‹µ |
| 4-3 | ì–´ë…¸í…Œì´ì…˜ ì´ë¦„ | @RequiresRoles | âœ… ì •ë‹µ |
| 5 | ThreadLocal ê°’ ë¶„ë¦¬ ì´ìœ  | ë³„ë„ ìŠ¤ë ˆë“œ ë‚´ì—ì„œ ìž‘ë™í•˜ë¯€ë¡œ ë¶„ë¦¬ë¨ | âœ… ì •ë‹µ (í•µì‹¬ í¬í•¨) |
| 6 | ë§ˆìŠ¤í‚¹ ê²°ê³¼ | D (ì „í™”ë²ˆí˜¸/ì´ë©”ì¼ ëª¨ë‘ ë§ˆìŠ¤í‚¹) | âœ… ì •ë‹µ |

---

## ðŸ§  í•´ì„¤ ë° ì£¼ì˜ í¬ì¸íŠ¸

### âŒ ë¬¸ì œ 3 í•´ì„¤
- `@Autowired(required = false)`ëŠ” **ë¹ˆì´ ì—†ëŠ” ê²½ìš° ì˜ˆì™¸ë¥¼ ë§‰ê¸° ìœ„í•œ ê²ƒ**ì´ì§€,
  ë™ì¼ íƒ€ìž…ì˜ ë¹ˆì´ 2ê°œ ì´ìƒì¼ ë•Œ ì–´ëŠ ê²ƒì„ ì„ íƒí• ì§€ ì§€ì •í•˜ëŠ” ë°©ì‹ì´ ì•„ë‹˜
- í•´ê²° ë°©ë²•ì´ ì•„ë‹Œ ê²ƒ â†’ **ì •ë‹µ: C ë§žìŒ, ì˜¤ë‹µ ì´ìœ ëŠ” ì´í•´ í•„ìš”**

---

# ðŸ“˜ ë³´ì¶© ì •ë¦¬: ì‹¤ë¬´ ì§ˆë¬¸ ê¸°ë°˜ ë‚´ìš© ìš”ì•½

## 1. í•„í„°ì™€ AOPì˜ ì—­í•  ë¶„ë¦¬
- í•„í„°: ìš”ì²­ì˜ ìµœì „ë°© (URL, ì¸ì¦ í† í° ê¸°ë°˜ íŒë‹¨)
- AOP: ë©”ì„œë“œ ì§„ìž… ì‹œì ì—ì„œ ì—­í•  ê¸°ë°˜ ì¸ê°€ ì²˜ë¦¬ (ë” ì„¸ë°€í•œ ë¡œì§)

## 2. ThreadLocal vs static í˜¼ë™ ì •ë¦¬
- `ThreadLocal`ì€ staticìœ¼ë¡œ ì„ ì–¸ë˜ì§€ë§Œ,
  ë‚´ë¶€ì ìœ¼ë¡œëŠ” ê° ìŠ¤ë ˆë“œê°€ `ThreadLocalMap`ì´ë¼ëŠ” ë…ë¦½ëœ ì €ìž¥ì†Œë¥¼ ê°€ì§
- ì¦‰, staticì€ **ì ‘ê·¼ ê²½ë¡œ**ì¼ ë¿, **ë°ì´í„°ëŠ” ìŠ¤ë ˆë“œë§ˆë‹¤ ê²©ë¦¬ë˜ì–´ ì €ìž¥**ë¨

## 3. ThreadLocalMap ê°œë… ì‹œê°í™”
```text
Thread-1:
  ThreadLocalMap: { userRole(ThreadLocal) => ADMIN }

Thread-2:
  ThreadLocalMap: { userRole(ThreadLocal) => USER }
```

## 4. ì¡°ê±´ë¶€ ë§ˆìŠ¤í‚¹ ì‹¤ë¬´ ì˜ˆ
```java
if (!UserContext.getRole().equals(Role.ADMIN)) {
    field.set(obj, maskValue(...));
}
```

## 5. ë¦¬í”Œë ‰ì…˜ ì˜ˆì™¸ ë°©ì§€ ì²˜ë¦¬
```java
try {
    field.setAccessible(true);
    field.set(obj, masked);
} catch (IllegalAccessException | IllegalArgumentException e) {
    log.warn("ë§ˆìŠ¤í‚¹ ì˜¤ë¥˜: {}", e.getMessage());
}
```

## 6. ë¦¬ìŠ¤íŠ¸/ë°°ì—´ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬
```java
if (result instanceof Collection<?>) {
    for (Object item : (Collection<?>) result) {
        applyMaskingToObject(item);
    }
}
```
